# JSON Lines Pretty Printer テスト計画

## テスト概要
Playwright MCPを使用して、JSON Lines Pretty Printerのすべての機能を自動的にテストします。

## テスト項目一覧

### 1. 基本機能テスト

#### 1.1 データ入力と整形
- **実行内容**: テキストエリアにJSON Linesデータを入力し、整形ボタンをクリック
- **期待結果**: 
  - テーブルタブに自動切り替え
  - データが表形式で正しく表示される
  - ネストされたJSONが階層ヘッダーで表示される

#### 1.2 エラー処理
- **実行内容**: 無効なJSONを含むデータを入力して整形
- **期待結果**: 
  - エラーのある行がスキップされる
  - アラートでエラー詳細が表示される
  - 有効な行のみテーブルに表示される

#### 1.3 空データの処理
- **実行内容**: 空のテキストエリアで整形ボタンをクリック
- **期待結果**: エラーメッセージが表示される

### 2. ファイル操作テスト

#### 2.1 ファイルアップロード
- **実行内容**: .jsonlファイルをアップロード
- **期待結果**: ファイル内容がテキストエリアに表示される

#### 2.2 クリア機能
- **実行内容**: データ入力後にクリアボタンをクリック
- **期待結果**: 
  - テキストエリアが空になる
  - 入力タブに戻る
  - sessionStorageもクリアされる

### 3. テーブル表示機能テスト

#### 3.1 JSON詳細表示
- **実行内容**: テーブルの行をクリック
- **期待結果**: 
  - JSON詳細ダイアログが表示される
  - 構文ハイライトが適用される
  - インデントガイドが表示される

#### 3.2 長い文字列の処理
- **実行内容**: 30文字を超える文字列を含むデータを表示
- **期待結果**: 
  - テーブルで省略表示（...）
  - クリックで全文表示ダイアログ

#### 3.3 値のコピー機能
- **実行内容**: テーブルセルの値をクリック
- **期待結果**: コピー用ダイアログが表示される

### 4. 列操作テスト

#### 4.1 列の非表示
- **実行内容**: 列ヘッダーの×ボタンをクリック
- **期待結果**: 
  - 対象列が非表示になる
  - 親列の場合は子列も非表示になる

#### 4.2 列の再表示
- **実行内容**: ＋ボタンをクリックして非表示列を選択
- **期待結果**: 
  - 選択した列が再表示される
  - 親列の場合は子列もすべて再表示される

#### 4.3 値の存在率表示
- **実行内容**: 一部のキーが欠けているデータを表示
- **期待結果**: ヘッダーに存在率インジケーターが表示される

### 5. ソート機能テスト

#### 5.1 文字列ソート
- **実行内容**: 文字列列のヘッダーをクリック
- **期待結果**: 降順→昇順→ソートなしの順で切り替わる

#### 5.2 数値ソート
- **実行内容**: 数値列のヘッダーをクリック
- **期待結果**: 
  - 数値として正しくソートされる
  - null/undefined/空文字列は最後に表示

#### 5.3 混在型ソート
- **実行内容**: 数値と文字列が混在する列でソート
- **期待結果**: 数値が前、文字列が後に表示される

### 6. 検索機能テスト

#### 6.1 AND検索
- **実行内容**: スペース区切りで複数キーワードを入力
- **期待結果**: すべてのキーワードを含む行のみ表示

#### 6.2 OR検索
- **実行内容**: セミコロン区切りで複数キーワードを入力
- **期待結果**: いずれかのキーワードを含む行が表示

#### 6.3 検索結果0件
- **実行内容**: マッチしないキーワードを入力
- **期待結果**: 「該当するデータが見つかりませんでした」と表示

### 7. フィルタ機能テスト

#### 7.1 チェックボックスフィルタ
- **実行内容**: 20種類以下の値を持つ列でフィルタを開く
- **期待結果**: 
  - チェックボックス形式のフィルタが表示
  - 選択した値のみ表示される
  - 出現回数が表示される

#### 7.2 数値範囲フィルタ
- **実行内容**: 数値列でフィルタを設定
- **期待結果**: 
  - 範囲入力フィールドが表示
  - 指定範囲内の値のみ表示

#### 7.3 日付フィルタ
- **実行内容**: YYYY-MM-DD形式の日付列でフィルタ
- **期待結果**: 
  - date inputが表示
  - 日付範囲でフィルタリング

#### 7.4 テキストフィルタ
- **実行内容**: 文字列列でフィルタを設定
- **期待結果**: 
  - 複数行テキスト入力が表示
  - 改行でOR条件として機能

#### 7.5 複数フィルタの組み合わせ
- **実行内容**: 複数列に異なるフィルタを適用
- **期待結果**: すべてのフィルタ条件がANDで適用される

#### 7.6 フィルタクリア
- **実行内容**: ×▼ボタンをクリック
- **期待結果**: すべてのフィルタがクリアされる

### 8. スクロール機能テスト

#### 8.1 横スクロールバー
- **実行内容**: 画面幅を超えるテーブルを表示
- **期待結果**: 
  - 画面下部に固定スクロールバーが表示
  - テーブルと同期してスクロール

#### 8.2 スクロールボタン
- **実行内容**: 画面左右端にホバー
- **期待結果**: 
  - スクロールボタン（◀▶）が表示
  - クリックで画面半分スクロール

### 9. JSON表示機能テスト

#### 9.1 オブジェクトの折りたたみ/展開
- **実行内容**: JSONダイアログ内でオブジェクトの▼をクリック
- **期待結果**: オブジェクトが折りたたまれる/展開される

#### 9.2 配列の省略表示
- **実行内容**: 4要素以上の配列を含むデータを表示
- **期待結果**: 
  - 最初の3要素のみ表示
  - 「他N要素」クリックで全表示

#### 9.3 全体展開ボタン
- **実行内容**: ⇔ボタンをクリック
- **期待結果**: すべての省略要素が展開される

### 10. 多言語対応テスト

#### 10.1 言語切り替え
- **実行内容**: 🌐ボタンをクリック
- **期待結果**: 
  - UIが日本語/英語で切り替わる
  - すべてのテキストが翻訳される

#### 10.2 言語設定の永続化
- **実行内容**: 言語を切り替えてページをリロード
- **期待結果**: 選択した言語が保持される

### 11. sessionStorageテスト

#### 11.1 データの永続化
- **実行内容**: データを入力・整形後にページをリロード
- **期待結果**: 
  - 入力データが復元される
  - テーブル表示も復元される

#### 11.2 フィルタ状態の永続化
- **実行内容**: フィルタを設定してリロード
- **期待結果**: フィルタ設定が保持される

### 12. キーボードショートカットテスト

#### 12.1 Ctrl+Enter
- **実行内容**: テキストエリアでCtrl+Enterを押下
- **期待結果**: 整形が実行される

#### 12.2 Ctrl+F
- **実行内容**: テーブルタブでCtrl+Fを押下
- **期待結果**: 検索ボックスにフォーカスが移動

#### 12.3 ESCキー
- **実行内容**: ダイアログ表示中にESCを押下
- **期待結果**: ダイアログが閉じる

### 13. ブラウザ互換性テスト

#### 13.1 History API
- **実行内容**: ブラウザの戻る/進むボタンを使用
- **期待結果**: タブ切り替えが正しく動作する

### 14. エッジケーステスト

#### 14.1 大量データ
- **実行内容**: 1000行以上のデータを処理
- **期待結果**: 正常に表示される（パフォーマンスも確認）

#### 14.2 深いネスト
- **実行内容**: 5階層以上のネストされたJSONを表示
- **期待結果**: すべての階層が正しく表示される

#### 14.3 特殊文字
- **実行内容**: エスケープが必要な文字を含むデータ
- **期待結果**: 正しくエスケープされて表示される

## テスト実行順序

1. 基本機能テスト（必須）
2. テーブル表示機能テスト
3. 列操作テスト
4. ソート機能テスト
5. 検索機能テスト
6. フィルタ機能テスト
7. その他の機能テスト

## 注意事項

- 各テストは独立して実行可能であること
- テスト間でデータが干渉しないようクリア処理を実施
- エラーが発生した場合はスクリーンショットを保存