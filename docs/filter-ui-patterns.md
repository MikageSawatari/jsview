# フィルタUIパターンガイド

## 概要
このドキュメントは、JSON Lines Pretty Printerで使用される各種フィルタUIの統一的なデザインパターンを定義します。

## 共通要素

### 1. ドロップダウンコンテナ
- **クラス名**: `filter-dropdown`
- **幅**: 最小250px、最大400px
- **最大高さ**: 400px（内容に応じてスクロール可能）
- **背景**: 白（#ffffff）
- **境界線**: 1px solid #ddd
- **影**: box-shadow: 0 2px 8px rgba(0,0,0,0.15)
- **角丸**: border-radius: 4px

### 2. ヘッダー部
- **クラス名**: `filter-header`
- **パディング**: 10px
- **背景**: #f8f8f8
- **境界線**: 下部に1px solid #eee
- **内容**: タイトルとアクションボタン

### 3. フッター部
- **クラス名**: `filter-footer`
- **パディング**: 10px
- **境界線**: 上部に1px solid #eee
- **ボタン配置**: 右寄せ、gap: 10px
- **ボタン**: 適用（青）、キャンセル（グレー）

## フィルタタイプ別仕様

### 1. チェックボックスフィルタ（値が20種類以下）

#### 構成要素
1. **ヘッダー**
   - タイトル: 「チェックボックスフィルタ」
   - ボタン: 「すべて選択」「すべて解除」

2. **検索ボックス**
   - クラス: `filter-search`
   - プレースホルダ: 「フィルタ内を検索... (スペース:AND, ;:OR)」

3. **値リスト**
   - クラス: `filter-list`
   - 最大高さ: 250px（スクロール可能）
   - アイテム構成:
     ```html
     <label class="filter-item">
       <input type="checkbox" value="{JSON値}">
       <span class="filter-value" title="{完全な値}">{表示値}</span>
       <span class="filter-count">({現在件数}/{全体件数})</span>
     </label>
     ```

4. **フッター**
   - 適用ボタン・キャンセルボタン

#### 機能要件
- [ ] タイトル表示
- [ ] すべて選択/解除機能
- [ ] 検索機能（AND/OR対応）
- [ ] 件数表示（他フィルタ適用時は n/m 形式）
- [ ] 値のソート（数値は数値順、文字列はアルファベット順）

### 2. 範囲フィルタ（数値が20種類超）

#### 構成要素
1. **ヘッダー**
   - タイトル: 「数値範囲フィルタ」
   - ボタン: 「すべて選択」「すべて解除」

2. **カスタム範囲入力**
   - クラス: `filter-range-inputs`
   - 最小値・最大値の入力欄
   - 「～」区切り

3. **範囲リスト**
   - クラス: `filter-range-list`
   - 最大高さ: 200px（スクロール可能）
   - アイテム構成:
     ```html
     <label class="filter-item">
       <input type="checkbox" data-min="{最小}" data-max="{最大}">
       <span class="filter-value">{最小} - {最大}</span>
       <span class="filter-count">({現在件数}/{全体件数})</span>
     </label>
     ```

4. **フッター**
   - 適用ボタン・キャンセルボタン

#### 機能要件
- [ ] タイトル表示
- [ ] すべて選択/解除機能
- [ ] カスタム範囲入力
- [ ] 件数表示（他フィルタ適用時は n/m 形式）
- [ ] 整数の場合は小数点なし表示

### 3. テキストフィルタ（その他の場合）

#### 構成要素
1. **ヘッダー**
   - タイトル: 「テキストフィルタ」
   - ボタン: 「クリア」

2. **情報表示**
   - クラス: `filter-info`
   - テキスト: 「値が多いため、検索条件で絞り込んでください (n種類)」
   - 他フィルタ適用時: 「(n/m種類)」

3. **テキスト入力**
   - クラス: `filter-text-input`
   - textarea要素
   - プレースホルダ: 「検索条件を入力（スペース:AND、;:OR、改行:OR）」

4. **フッター**
   - 適用ボタン・キャンセルボタン

#### 機能要件
- [ ] タイトル表示
- [ ] クリア機能
- [ ] 複数行入力対応
- [ ] AND/OR検索対応
- [ ] 件数表示（他フィルタ適用時は n/m 形式）

### 4. 日付フィルタ（YYYY-MM-DD形式）

#### 構成要素
1. **ヘッダー**
   - タイトル: 「日付フィルタ」
   - ボタン: 「クリア」

2. **日付範囲選択**
   - 開始日入力（HTML5 date input）
   - 終了日入力（HTML5 date input）
   - ラベル付きで見やすく配置

3. **フッター**
   - 適用ボタン・キャンセルボタン

#### 機能要件
- [ ] タイトル表示
- [ ] クリア機能
- [ ] 日付範囲によるフィルタリング
- [ ] 空の日付値は除外
- [ ] HTML5 date inputによるネイティブカレンダー

### 5. 日時フィルタ（ISO 8601形式）

#### 構成要素
1. **ヘッダー**
   - タイトル: 「日時フィルタ」
   - ボタン: 「クリア」

2. **日時範囲選択**
   - 開始日時入力（HTML5 datetime-local input）
   - 終了日時入力（HTML5 datetime-local input）
   - ラベル付きで見やすく配置

3. **フッター**
   - 適用ボタン・キャンセルボタン

#### 機能要件
- [ ] タイトル表示
- [ ] クリア機能
- [ ] 日時範囲によるフィルタリング
- [ ] タイムゾーン対応（ISO 8601形式）
- [ ] HTML5 datetime-local inputによるネイティブUI

## スタイルガイドライン

### 色定義
- **プライマリ（青）**: #2196F3
- **プライマリホバー**: #1976D2
- **成功（緑）**: #4CAF50
- **警告（赤）**: #f44336
- **背景グレー**: #f8f8f8
- **境界線**: #ddd
- **テキスト**: #333
- **サブテキスト**: #666

### スペーシング
- **基本パディング**: 10px
- **アイテム間隔**: 6px
- **ボタン間隔**: 10px

### フォント
- **基本サイズ**: 14px
- **小サイズ**: 12px（件数表示など）
- **入力欄**: 13px

## 実装チェックリスト

新しいフィルタタイプを追加する際は、以下を確認してください：

- [ ] ヘッダーにタイトルを表示
- [ ] 適切なアクションボタンを配置
- [ ] フッターに適用・キャンセルボタンを配置
- [ ] 件数表示（該当する場合）
- [ ] 他フィルタ適用時の件数計算で自身を除外
- [ ] ドラッグ操作でドロップダウンが閉じない
- [ ] 外側クリックで閉じる
- [ ] ESCキーで閉じる（将来実装）
- [ ] タブキーでフォーカス移動（将来実装）